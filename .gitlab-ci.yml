stages:
    - release
    - build

######################
## Continous Builds ##
######################

.continous-job-base:
    tags:
        - catalina
        - amd64
    stage: build
    only:
        - merge_requests
    interruptible: true

.continous-build-base:
    script:
        - ./buildVLCMediaLibraryKit.sh -b -l -v

continous-VLCMediaLibraryKit:
    extends:
        - .continous-job-base
        - .continous-build-base

####################
## Release builds ##
####################

.release-job-base:
    tags:
        - catalina
    stage: release
    only:
        - tags
    artifacts:
        paths:
            - ./build/*.zip
            - ./build/*.patch

VLCMediaLibraryKit:
    extends: .release-job-base
    script:
        - ./buildVLCMediaLibraryKit.sh -b -l
        - ./createDeployable.sh -v ${CI_COMMIT_TAG}
